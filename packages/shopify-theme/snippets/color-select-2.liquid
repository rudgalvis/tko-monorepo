{% for item in color_variants %}

    {% assign is_this_active = false %}
    {% assign ids = '' |  split: ',' %}

    {% for option in item.variants %}
        {% assign temp_array = option.id | split: ',' %}
        {% assign ids = ids | concat: temp_array %}

        {% if option.id == active.id %}
            {% assign is_this_active = true %}
        {% endif %}
    {% endfor %}


    <a href="{{ item.url }}" class="color-variant--link"><img class="color-variant--image {% if is_this_active %}active{% endif %}" src="{{ item.images[0] | product_img_url: '128x128', crop: 'center' }}" alt="img"></a>
{% endfor %}

<style>
    .color-variant--link {
        display: inline-block;
    }

    .color-variant--image {
        width: 64px;
        height: 64px;
        border-radius: 5px;
        border: 1px solid transparent;
    }

    .color-variant--image.active {
        border: 1px solid black;
    }
</style>