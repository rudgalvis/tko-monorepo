{% comment %}theme-check-disable TemplateLength{% endcomment %}
{{ 'section-main-product.css' | asset_url | stylesheet_tag }}
{{ 'component-rte.css' | asset_url | stylesheet_tag }}
{{ 'component-loading-overlay.css' | asset_url | stylesheet_tag }}
{{ 'main-size.css' | asset_url | stylesheet_tag }}
{{ 'review.css' | asset_url | stylesheet_tag }}
{{ 'notifyme.css' | asset_url | stylesheet_tag }}


<script src="{{ 'product-info.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>


<link rel="stylesheet" href="{{ 'component-card.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-price.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-product-grid.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'section-product-recommendations.css' | asset_url }}" media="print"
      onload="this.media='all'">

<noscript>{{ 'component-card.css' | asset_url | stylesheet_tag }}</noscript>
<noscript>{{ 'component-price.css' | asset_url | stylesheet_tag }}</noscript>
<noscript>{{ 'component-product-grid.css' | asset_url | stylesheet_tag }}</noscript>
<noscript>{{ 'section-product-recommendations.css' | asset_url | stylesheet_tag }}</noscript>
{{ 'component-hp-product.css' | asset_url | stylesheet_tag }}

<style>

    .spaced-section:last-child {
        margin-bottom: 0px !important;
    }

    .spaced-section:last-child {
        margin-bottom: calc(11rem + var(--page-width-margin));
    }

    .product-container:nth-of-type(3n+3) .frame-container {
        border-right: none;
        border-left: none;

    }

    .product-container:nth-of-type(3n+1) .frame-container {
        border-left: none;
        border-right: 1px solid black;

    }

    .product-container:nth-of-type(3n+2) .frame-container {
        border-left: none;
        border-right: 1px solid black;

    }


    @media (min-width: 768px) and (max-width: 1024px) {
        .product-container:nth-of-type(2n+1) .frame-container {
            border-right: .5px solid black;;
            border-left: none;

        }

        .product-container:nth-of-type(2n+2) .frame-container {
            border-left: none;
            border-right: none;

        }
    }


    @media (min-width: 320px) and (max-width: 480px) {

        .product-container:nth-of-type(2n+1) .frame-container {
            border-right: .5px solid black;;
            border-left: none;

        }

        .product-container:nth-of-type(2n+2) .frame-container {
            border-left: none;
            border-right: none;

        }

    }

</style>


<link rel="stylesheet" href="{{ 'component-deferred-media.css' | asset_url }}" media="print" onload="this.media='all'">

<script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>


{%- capture contentForQuerystring -%}{{ content_for_header }}{%- endcapture -%}
{%- assign pageUrl = contentForQuerystring | split: '"pageurl":"' | last | split: '"' | first | split: 'www.theknottyones.com' | last |
        replace: '\/', '/' |
        replace: '%20', ' ' |
        replace: '\u0026', '&'
-%}
{% assign debug = false %}
{% assign control = false %}

{% if pageUrl contains "?variant=" %}

    {%- assign pageQuerystring = pageUrl | split: '?' | last | remove: 'variant=' -%}
    {% assign control = true %}
{% else %}
    {% assign pageQuerystring = product.variants[0].option1 | handleize %}
{% endif %}


{% if pageUrl contains "&dfw_tracker=" %}
    {% assign pageQuerystring = product.variants[0].option1 | handleize %}
{% endif %}




{% if pageUrl contains "&variant=" %}


    {% if pageUrl contains "?utm_content=" %}
        {% assign pageQuerystring = product.variants[0].option1 | handleize %}
    {% else %}

        {%- assign pageQuerystring = pageUrl | split: '&' | last | remove: 'variant=' -%}
        {% assign getID = pageQuerystring | strip %}

        {% assign control = true %}
        {% for variant in product.variants %}
            {% assign getVariantID = variant.id | strip %}
            {% if getVariantID == getID %}
                {% assign pageQuerystring = variant.option1 | handleize %}
            {% endif %}
        {% endfor %}

    {% endif %}
{% endif %}










{% assign colors = settings.colorswatch | split: ',' %}
{% assign HEXcolor2 = 'Black' %}


<!---
Mobile Slider
----->
<section class="mobile-slider-wrapper">
    <div class="PDP-wishlist-container">
        {%- render 'button-wishlist-mobile', getproduct: product, dimention: '0 0 42 42', h_width: 24, h_height: 24, color: '#ffffff' -%}
    </div>
    <div class="mobile-product-slider active">

        <div id="mobile-gallery" class="mps-container mobile-slider stable js-exp-gallery" data-flickity
             data-controls="" data-placeholder="{{ media | image_url: width: 550 }}">


            {% for media in product.media %}
                {% assign getOrderNumberG = forloop.index | append: "" %}

                <div class="mps-item carousel-cell js-exp-gallery__item">
                    {% case media.media_type %}
                        {% when 'image' %}
                            <img width="" height="" src="{{ media | image_url: width: 550 }}"
                                 data-modal-src="{{ media | image_url: width: 550 }}" alt="" loading="lazy"/>
                        {% when 'video' %}

                            {{ media | video_tag: autoplay: true, muted: true, loop: true }}

                    {% endcase %}

                    {%- comment -%}
                           {%- endcomment -%}
                    {% for fields in product.variants[0].metafields.variantModelInfo %}
                        {% assign getOrderNumberStepOne = fields[0] | split: "/" %}
                        {% assign getOrderNumberStepTwo = getOrderNumberStepOne[0] | split: "-" %}
                        {% assign getOrderNumberStepThree = getOrderNumberStepTwo[1] %}
                        {% if getOrderNumberStepThree == getOrderNumberG %}
                            <a data-gendertype="" class="model-info-button" href="javascript:void(0);">MODEL INFO</a>
                            {% break %}
                        {% endif %}

                    {% endfor %}


                    {%- comment -%}
                    {%- endcomment -%}


                    <div class="infobox" data-variantoption="{{ variant.option1 }}">

                        <ul class="info-window">
                            <div class="infobox_close">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                     height="100%" width="100%" id="Layer_1" style="enable-background:new 0 0 512 512;"
                                     version="1.1" viewBox="0 0 512 512" xml:space="preserve"><path
                                            d="M443.6,387.1L312.4,255.4l131.5-130c5.4-5.4,5.4-14.2,0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4  L256,197.8L124.9,68.3c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4L68,105.9c-5.4,5.4-5.4,14.2,0,19.6l131.5,130L68.4,387.1  c-2.6,2.6-4.1,6.1-4.1,9.8c0,3.7,1.4,7.2,4.1,9.8l37.4,37.6c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1L256,313.1l130.7,131.1  c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1l37.4-37.6c2.6-2.6,4.1-6.1,4.1-9.8C447.7,393.2,446.2,389.7,443.6,387.1z"/></svg>
                            </div>
                            <div class="change-mager">
                                <div class="inches active" class="mager-text" disabled="true">in</div>
                                <span>/</span>
                                <div class="cm" class="mager-text">cm</div>
                            </div>

                            {% for fields in product.variants[0].metafields.variantModelInfo %}

                                {% assign getOrderNumberStepOne = fields[0] | split: "/" %}
                                {% assign getOrderNumberStepTwo = getOrderNumberStepOne[0] | split: "-" %}
                                {% assign getOrderNumberStepThree = getOrderNumberStepTwo[1] %}

                                {% if getOrderNumberStepThree == getOrderNumberG %}
                                    {% assign correctInfo = fields[0] | split: '/' %}

                                    {% if correctInfo[1] == 'Man' and correctInfo[0] == getOrderNumberG %}
                                        {% assign gendercontrol = fields[1] %}

                                    {% endif %}

                                    {% if correctInfo[1] == 'Modelnameinch' %}
                                        <p class="nameinch" style="order:1;">{{ fields[1] }}</p>
                                    {% elsif correctInfo[1] == 'Modelname' %}

                                        <p class="namecm" style="order:1;">{{ fields[1] }}</p>
                                    {% else %}
                                        {% if correctInfo[1] == 'Bust' %}
                                            <li class="bodypart_{{ correctInfo[1] | handleize }}" style="order:2;">
                      <span class="header-info-item">

                        {{ correctInfo[1] }}:

                      </span>
                                                {% assign getValueInfo = fields[1] %}

                                                <span class="info-value"
                                                      data-mager="{{ getValueInfo.value | remove: 'cm' | strip }}">{{ getValueInfo.value | remove: 'cm' | strip }}"</span>

                                            </li>
                                        {% endif %}

                                        {% if correctInfo[1] == 'Waist' %}
                                            <li class="bodypart_{{ correctInfo[1] | handleize }}" style="order:2;">
                      <span class="header-info-item">

                        {{ correctInfo[1] }}:

                      </span>
                                                {% assign getValueInfo = fields[1] %}

                                                <span class="info-value"
                                                      data-mager="{{ getValueInfo.value | remove: 'cm' | strip }}">{{ getValueInfo.value | remove: 'cm' | strip }}"</span>

                                            </li>

                                        {% endif %}

                                        {% if correctInfo[1] == 'Hips' %}
                                            <li class="bodypart_{{ correctInfo[1] | handleize }}" style="order:3;">
                      <span class="header-info-item">

                        {{ correctInfo[1] }}:

                      </span>
                                                {% assign getValueInfo = fields[1] %}

                                                <span class="info-value"
                                                      data-mager="{{ getValueInfo.value | remove: 'cm' | strip }}">{{ getValueInfo.value | remove: 'cm' | strip }}"</span>

                                            </li>

                                        {% endif %}
                                    {% endif %}

                                {% endif %}

                            {% endfor %}

                    </div>

                    <span class="imageGender" data-imgender="{% if gendercontrol == true %}male{% endif %}"></span>

                </div>
            {% endfor %}


        </div>

    </div>

</section>
<!---
Mobile Slider
----->

<section class="page-width product-major">
    <div class="product grid grid--1-col grid--2-col-tablet">
        <div class="grid__item product__media-wrapper">
            <div class="slider-mobile-gutter">
                <a class="skip-to-content-link button visually-hidden" href="#ProductInfo-{{ section.id }}">
                    {{ "accessibility.skip_to_product_info" | t }}
                </a>
                <ul id="desktop-gallery" class="pimage-wrapper {{ pageQuerystring }} active js-exp-gallery"
                    data-controls="expLightbox" data-placeholder="{{ media | image_url: width: 1100 }}">
                    {% for media in product.media %}
                        {% assign getOrderNumberG = forloop.index | append: "" %}
                        {% if forloop.first %}
                            {% assign size_of_image = forloop.length %}
                            {% assign size_of_imageDetect = size_of_image | modulo: 2 %}
                        {% endif %}
                        <li class="pimage{% if forloop.last == true and size_of_imageDetect != 0 %}full-size-product-image{% endif %} js-exp-gallery__item">


                            {% case media.media_type %}
                                {% when 'image' %}
                                    <img width="" height="" src="{{ media | image_url: width: 550 }}"
                                         data-modal-src="{{ media | image_url: width: 1100 }}" alt="" loading="lazy">
                                {% when 'video' %}


                                    {{ media | video_tag: autoplay: true, muted: true, loop: true, image_size: "550x" }}

                            {% endcase %}



                            {% for fields in product.variants[0].metafields.variantModelInfo %}
                                {% assign getOrderNumberStepOne = fields[0] | split: "/" %}
                                {% assign getOrderNumberStepTwo = getOrderNumberStepOne[0] | split: "-" %}
                                {% assign getOrderNumberStepThree = getOrderNumberStepTwo[1] %}
                                {% if getOrderNumberStepThree == getOrderNumberG %}
                                    <a data-gendertype="{{ gendercontrol }}" class="model-info-button"
                                       href="javascript:void(0);">MODEL INFO</a>
                                    {% break %}
                                {% endif %}

                            {% endfor %}
                            <div class="infobox" data-variantoption="{{ product.variants[0].option1 }}">
                                <ul class="info-window">
                                    <div class="infobox_close">
                                        <svg xmlns="http://www.w3.org/2000/svg" height="18px" viewBox="0 0 24 24"
                                             width="18px" fill="#000000">
                                            <path d="M0 0h24v24H0z" fill="none"/>
                                            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                                        </svg>
                                    </div>
                                    <div class="change-mager">
                                        <div class="inches active" class="mager-text" disabled="true">in</div>
                                        <span>/</span>
                                        <div class="cm" class="mager-text">cm</div>
                                    </div>

                                    {% for fields in product.variants[0].metafields.variantModelInfo %}
                                        {% assign getOrderNumberStepOne = fields[0] | split: "/" %}
                                        {% assign getOrderNumberStepTwo = getOrderNumberStepOne[0] | split: "-" %}
                                        {% assign getOrderNumberStepThree = getOrderNumberStepTwo[1] %}
                                        {% if getOrderNumberStepThree == getOrderNumberG %}
                                            {% assign correctInfo = fields[0] | split: '/' %}
                                            {% if correctInfo[1] == 'Man' %}
                                                {% assign gendercontrol = fields[1] %}
                                            {% endif %}
                                            {% if correctInfo[1] == 'Modelnameinch' %}
                                                <p class="nameinch" style="order:1;">{{ fields[1] }}</p>
                                            {% elsif correctInfo[1] == 'Modelname' %}
                                                <p class="namecm" style="order:1;">{{ fields[1] }}</p>
                                            {% else %}

                                                {% if correctInfo[1] == 'Bust' %}
                                                    <li class="bodypart_{{ correctInfo[1] | handleize }}"
                                                        style="order:2;">
                            <span class="header-info-item">

                              {{ correctInfo[1] }}:

                            </span>
                                                        {% assign getValueInfo = fields[1] %}

                                                        <span class="info-value"
                                                              data-mager="{{ getValueInfo.value | remove: 'cm' | strip }}">{{ getValueInfo.value | remove: 'cm' | strip }}"</span>

                                                    </li>
                                                {% endif %}

                                                {% if correctInfo[1] == 'Waist' %}
                                                    <li class="bodypart_{{ correctInfo[1] | handleize }}"
                                                        style="order:2;">
                            <span class="header-info-item">

                              {{ correctInfo[1] }}:

                            </span>
                                                        {% assign getValueInfo = fields[1] %}

                                                        <span class="info-value"
                                                              data-mager="{{ getValueInfo.value | remove: 'cm' | strip }}">{{ getValueInfo.value | remove: 'cm' | strip }}"</span>

                                                    </li>

                                                {% endif %}

                                                {% if correctInfo[1] == 'Hips' %}
                                                    <li class="bodypart_{{ correctInfo[1] | handleize }}"
                                                        style="order:3;">
                            <span class="header-info-item">

                              {{ correctInfo[1] }}:

                            </span>
                                                        {% assign getValueInfo = fields[1] %}

                                                        <span class="info-value"
                                                              data-mager="{{ getValueInfo.value | remove: 'cm' | strip }}">{{ getValueInfo.value | remove: 'cm' | strip }}"</span>

                                                    </li>

                                                {% endif %}

                                            {% endif %}
                                        {% endif %}
                                    {% endfor %}

                                </ul>
                            </div>
                        </li>



                        {% if forloop.index == 4 and forloop.length > 4 %}
                            {% if section.settings.bid_header != blank or section.settings.bid_content != blank %}
                                <div class="pdp-image-module">
                                    <h2>{{ section.settings.bid_header }}</h2>
                                    {{ section.settings.bid_content }}
                                </div>
                            {% endif %}
                        {% endif %}

                    {% endfor %}

                </ul>

            </div>

        </div>
        <div class="product__info-wrapper grid__item">
            <div id="ProductInfo-{{ section.id }}"
                 class="product__info-container{% if section.settings.enable_sticky_info %} product__info-container--sticky{% endif %}">
                {%- assign product_form_id = 'product-form-' | append: section.id -%}

                <div>
                    {% render 'standard-add-to-cart',
                            product:product,
                            product_form_id: product_form_id,
                            section: section
                    %}
                </div>

                {%- for block in section.blocks -%}
                    {%- case block.type -%}
                        {%- when 'title' -%}
                            <div class="mobile___adjustment">
                            <div class="mobile___price_holder">
                                <div class="title-heart-container">
                                    <h1 class="product__title" {{ block.shopify_attributes }}>
                                        {%- render 'product-title', name: product.title -%}
                                    </h1>
                                    <div class="PDP-wishlist-container-desktop">{%- render 'button-wishlist-mobile', getproduct: product, dimention: '0 0 84 84', h_width: 20, h_height: 20, color: '#ffffff', device: 'PDP', getClass: 'heart-PDP' -%}</div>
                                </div>
                                <h2 class="product__type">
                                    {{ product.type | escape }}
                                </h2>
                            </div>
                        {%- when 'text' -%}
                            <p class="product__text{% if block.settings.text_style == 'uppercase' %} caption-with-letter-spacing{% elsif block.settings.text_style == 'subtitle' %} subtitle{% endif %}" {{ block.shopify_attributes }}>
                                {{- block.settings.text -}}
                            </p>
                        {%- when 'price' -%}
                            <div class="price___adjustment  {% if product.tags contains 'pre-order' %} price_adjustment_pre__order {% endif %}">
                                {% render '1lib-pdp-price', product: product, pageQuerystring: pageQuerystring %}


                                <div class="split-container">
                                    <p>All import taxes and duties are <b>included</b>.</p>
                                </div>

                                <div class="exclusive-offer desktop-only">
                                    {{ product.metafields.custom.exclusive_offer_message | metafield_tag }}
                                </div>
                            </div>

                            </div>
                            {%- comment -%}
                            {% if product.tags contains 'pre-order' %}
                                  <div class="pre-order-holder">
                                    {{ product.metafields.preorder.preordercontent }}
                                  </div>
                            {% endif %}
                            {%- endcomment -%}

                            {% render '1ib-pre-order-strip' %}

                            {% comment %}<div id="preorderholder"{% endcomment %}
                                 {% comment %}class="pre-order-holder {% if product.tags contains 'pre-order' %} preorder__show_on_desktop {% endif %}">{% endcomment %}
                                {% comment %}{% if product.tags contains 'pre-order' %}{% endcomment %}
                                    {% comment %}{{ product.metafields.preorder.preordercontent }}{% endcomment %}
                                {% comment %}{% endif %}{% endcomment %}
                            {% comment %}</div>{% endcomment %}



                        {%- when 'description' -%}
                            <div class="product___summary">
                                <p>{{ product.content }}</p>
                            </div>

                        {%- when 'variant_picker' -%}

                            {% assign sizeofsize = product.variants[0].option2 %}

                            {%- comment -%}
                               Seasonal Color or Core Color
                            {%- endcomment -%}

                            {% if pageQuerystring != nil %}
                                {% assign optionmeColor = pageQuerystring | handleize %}
                            {% else %}
                                {% assign optionmeColor = product.variants[0].option1 | handleize %}
                            {% endif %}

                            {% assign pp = 0 %}
                            {% assign pr = 0 %}

                            {% for option in product.options %}
                                {% if option == "Color" or option == "Colour" %}
                                    {% for variant in product.variants %}
                                        {% if variant.metafields.colortype.seasonal == true %}
                                            {% assign pp = pp | plus: 1 %}
                                            {% assign optionme = variant.option1 | handleize %}
                                            {% if optionmeColor == optionme %}
                                                {% assign seasonalColorName = optionme %}
                                            {% endif %}
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                            {% endfor %}



                            {% for product_option in product.options_with_values %}
                                {% if product_option.name == 'Color' %}
                                    {% for value in product_option.values %}
                                        {% assign pr = pr | plus: 1 %}


                                    {% endfor %}
                                {% endif %}
                            {% endfor %}



                            {%- comment -%}
                              Seasonal Color or Core Color
                           {%- endcomment -%}

                            <div class="exclusive-offer mobile-only mt-4 px-4_5">
                                {{ product.metafields.custom.exclusive_offer_message | metafield_tag }}
                            </div>

                            {% assign recommended_products = product.metafields.variantproduct.productgroup.value %}

                            {% comment %} Do not show inventory for handmade products {% endcomment %}

                            {% unless product.tags contains 'handmade' %}
                                {% render 'product-inventory',
                                        r1: product.metafields.variantproduct.productgroup.value,
                                        r2: product.metafields.variantproduct.productgroupseasonal.value,
                                        mobile: true
                                %}
                            {% endunless %}

                            <div class="mobile__colors_adjusments">
                                <div class="color-holder">
                                    <div class="colors--">
                                        {% if recommended_products != nil %}
                                            <div class="color-selector-product mobile-float">

                                                {% render 'pdp-color-core-group',seasonalColorName:seasonalColorName, control: control, recommended_products:recommended_products %}

                                            </div>
                                        {% endif %}

                                        {% assign recommended_products = product.metafields.variantproduct.productgroupseasonal.value %}
                                        {% assign custom_color_products = product.metafields.custom.custom_color_group_products.value %}

                                        {% if recommended_products != nil  %}

                                            <div class="color-selector-product">

                                                {% render 'pdp-color-seasonal-group',seasonalColorName:seasonalColorName, control: control, recommended_products:recommended_products %}

                                            </div>

                                        {% endif %}


                                        {% if custom_color_products !=  nil and recommended_products == nil %}

                                            <div class="color-selector-product">

                                                {% render 'pdp-color-custom-group',seasonalColorName:seasonalColorName, control: control, recommended_products:custom_color_products %}

                                            </div>

                                        {% endif %}



                                        {%- comment -%}seasonal{%- endcomment -%}

                                    </div>
                                    {%- comment -%}seasonal{%- endcomment -%}
                                </div>

                                <div id="warning" class="warning-select-size">
                                    {% assign typebuttondetect = false %}
                                    {% for tag in product.tags %}
                                        {% if tag contains 'typebutton' %}
                                            {% assign typebuttondetect = true %}
                                            {% break %}
                                        {% endif %}
                                    {% endfor %}

                                    <p>*Please choose {% if typebuttondetect != true %}size{% else %}type{% endif %}</p>
                                    <div class="warning_close">
                                        <img src="https://cdn.shopify.com/s/files/1/0548/6644/4336/files/svg-remove-item.svg?v=1639399863"
                                             width="" height="" loading="lazy">
                                    </div>
                                </div>

                                {% comment %}<div class="size-guide-mobile">{% endcomment %}
                                {% comment %}{% if product.metafields.productsize.sizeguide != nil %}{% endcomment %}
                                {% comment %}<a data-fancybox data-src="#sizeguide" href="javascript:;"{% endcomment %}
                                {% comment %}data-options='{"touch" : false}' class="size-guide-url" id="size-guide2">SIZE{% endcomment %}
                                {% comment %}GUIDE</a>{% endcomment %}
                                {% comment %}{% endif %}{% endcomment %}
                                {% comment %}</div>{% endcomment %}


                            </div>

                            {% unless product.tags contains 'handmade' %}
                                {% render 'product-inventory',
                                        r1: product.metafields.variantproduct.productgroup.value,
                                        r2: product.metafields.variantproduct.productgroupseasonal.value,
                                        mobile: false,
                                %}
                            {% endunless %}
                        {%- when 'size' -%}


                            {%- comment -%}detect button type{%- endcomment -%}

                            {% assign typebuttondetect = false %}
                            {% for tag in product.tags %}
                                {% if tag contains 'typebutton' %}
                                    {% assign typebuttondetect = true %}
                                    {% break %}
                                {% endif %}
                            {% endfor %}


                            {% for variant in product.variants %}
                                {% assign activeNotifyme = true %}
                                {% if variant.metafields.custom.disablenotifyme == true %}
                                    {% assign activeNotifyme = false %}
                                    {% break %}
                                {% else %}
                                    {% assign activeNotifyme = true %}
                                {% endif %}

                            {% endfor %}



                            {%- comment -%}detect button type{%- endcomment -%}


                            {% if sizeofsize == 'One Size' and product.available == false and activeNotifyme != false %}
                                {% assign autoOpen = "autoOpen" %}
                            {% else %}
                                {% assign autoOpen = "normal" %}
                            {% endif %}

                            <div class="sw-ghost"></div>
                            {% assign is_archived = false %}
                            {% for tag in product.tags %}
                                {% if tag == 'Archive' %}
                                    {% assign is_archived = true %}
                                {% endif %}
                            {% endfor %}
                            {% render 'notifyme' is_archived: is_archived, open: autoOpen, variantName1: product.variants[0].option1, variantID1: product.variants[0].id, onlydefault: product.has_only_default_variant, productName: product.title | escape %}
                            {% comment %}<div class="pre-order-mobile-holder {% if product.tags contains 'pre-order' %} preorder__show_on_mobile {% endif %}"{% endcomment %}
                                 {% comment %}id="pre-order-mobile-holder">{% endcomment %}
                                {% comment %}{% if product.tags contains 'pre-order' %}{% endcomment %}
                                    {% comment %}{{ product.metafields.preorder.preordercontent }}{% endcomment %}
                                {% comment %}{% endif %}{% endcomment %}
                            {% comment %}</div>{% endcomment %}
                            <div class="size___wrapper">

                                <div class="sizes {% if sizeofsize == 'One Size' %}one-size-sizes{% endif %} main--">
                                    {% assign recommended_size = product.variants[0].option1 %}
                                    {% assign recommended_products = product.metafields.variantproduct.productgroup.value %}
                                    {% assign recommended_products_seasonal = product.metafields.variantproduct.productgroupseasonal.value %}

                                    {% for product in recommended_products %}
                                        {% assign ggSize = product.variants[0].option1 | handleize %}
                                        <ul class="size-holder {{ product.variants[0].option1 | handleize }}{% if control == true %} {% if pageQuerystring == ggSize %} active {% endif %} {% else %} {% if recommended_size == product.variants[0].option1 %} active {% endif %} {% endif %} {% if sizeofsize == 'One Size' %}one-size-holder{% endif %}">
                                            {% for variant in product.variants %}

                                                {% for option in variant.option2 %}


                                                    {% if variant.inventory_quantity > 0 %}


                                                        <li>
                                                            <a data-variant-id="{{ variant.id }}"
                                                               data-preorder-content="{{ variant.metafields.preorder.preordercontent }}"
                                                               data-i="{{ variant.option1 | handleize }}"
                                                               data-varprice="{{ variant.price | money_without_trailing_zeros | strip_html }}"
                                                               data-vardiscount="{{ variant.compare_at_price | money_without_trailing_zeros | strip_html }}"
                                                               class="size-selection"
                                                               href="javascript:void(0)">{{ option }}</a>
                                                        </li>

                                                    {% else %}

                                                        {% if variant.inventory_policy == 'continue' %}
                                                            <li class="no-stock">
                                                                <a data-variant-id="{{ variant.id }}"
                                                                   data-preorder-content="{{ variant.metafields.preorder.preordercontent }}"
                                                                   data-i="{{ variant.option1 | handleize }}"
                                                                   data-varprice="{{ variant.price | money_without_trailing_zeros | strip_html }}"
                                                                   data-vardiscount="{{ variant.compare_at_price | money_without_trailing_zeros | strip_html }}"
                                                                   data-preorder="{{ variant.metafields.preorder.preordercontent }}"
                                                                   class="size-selection no_stock_preorder"
                                                                   href="javascript:void(0)">{{ option }}</a>
                                                            </li>
                                                        {% elsif variant.inventory_policy != 'continue' and variant.metafields.custom.disablenotifyme != true %}
                                                            <li class="notifyme">
                                                                <a data-variant-id="{{ variant.id }}"
                                                                   data-i="{{ variant.option1 | handleize }}"
                                                                   data-preorder-content="{{ variant.metafields.preorder.preordercontent }}"
                                                                   data-b="{{ variant.option1 }} {{ variant.option2 }}"
                                                                   data-varprice="{{ variant.price | money_without_trailing_zeros | strip_html }}"
                                                                   data-vardiscount="{{ variant.compare_at_price | money_without_trailing_zeros | strip_html }}"
                                                                   data-preorder="{{ variant.metafields.preorder.preordercontent }}"
                                                                   class="size-selection notifyme_selection"
                                                                   href="javascript:void(0)">{{ option }}</a>
                                                            </li>
                                                        {% else %}

                                                            <li class="no-sell">
                                                                <span class="no-sell-child">{{ option }}</span>
                                                            </li>
                                                        {% endif %}
                                                    {% endif %}


                                                {% endfor %}

                                            {% endfor %}

                                            {% if product.metafields.productsize.sizeguide != nil and sizeofsize != 'One Size' %}
                                                <li class="mobile-only">
                                                    {% render 'size-guide-link' %}
                                                </li>
                                            {% endif %}
                                        </ul>
                                    {% endfor %}

                                    {% for product in recommended_products_seasonal %}
                                        {% assign ggSize = product.variants[0].option1 | handleize %}

                                        <ul class="size-holder {{ product.variants[0].option1 | handleize }}{% if control == true %} {% if pageQuerystring == ggSize %} active {% endif %} {% else %} {% if recommended_size == product.variants[0].option1 %} active {% endif %} {% endif %} {% if sizeofsize == 'One Size' %}one-size-holder{% endif %}">
                                            {% for variant in product.variants %}

                                                {% for option in variant.option2 %}


                                                    {% if variant.inventory_quantity > 0 %}


                                                        <li>
                                                            <a data-variant-id="{{ variant.id }}"
                                                               data-i="{{ variant.option1 | handleize }}"
                                                               data-varprice="{{ variant.price | money_without_trailing_zeros | strip_html }}"
                                                               data-vardiscount="{{ variant.compare_at_price | money_without_trailing_zeros | strip_html }}"
                                                               data-preorder-content="{{ variant.metafields.preorder.preordercontent }}"
                                                               class="size-selection"
                                                               href="javascript:void(0)">{{ option }}</a>
                                                        </li>

                                                    {% else %}

                                                        {% if variant.inventory_policy == 'continue' %}
                                                            <li class="no-stock">
                                                                <a data-variant-id="{{ variant.id }}"
                                                                   data-i="{{ variant.option1 | handleize }}"
                                                                   data-varprice="{{ variant.price | money_without_trailing_zeros | strip_html }}"
                                                                   data-vardiscount="{{ variant.compare_at_price | money_without_trailing_zeros | strip_html }}"
                                                                   data-preorder-content="{{ variant.metafields.preorder.preordercontent }}"
                                                                   data-preorder="{{ variant.metafields.preorder.preordercontent }}"
                                                                   class="size-selection no_stock_preorder"
                                                                   href="javascript:void(0)">{{ option }}</a>
                                                            </li>
                                                        {% elsif variant.inventory_policy != 'continue' and variant.metafields.custom.disablenotifyme != true %}
                                                            <li class="notifyme">
                                                                <a data-variant-id="{{ variant.id }}"
                                                                   data-i="{{ variant.option1 | handleize }}"
                                                                   data-b="{{ variant.option1 }} {{ variant.option2 }}"
                                                                   data-varprice="{{ variant.price | money_without_trailing_zeros | strip_html }}"
                                                                   data-vardiscount="{{ variant.compare_at_price | money_without_trailing_zeros | strip_html }}"
                                                                   data-preorder-content="{{ variant.metafields.preorder.preordercontent }}"
                                                                   data-preorder="{{ variant.metafields.preorder.preordercontent }}"
                                                                   class="size-selection notifyme_selection"
                                                                   href="javascript:void(0)">{{ option }}</a>
                                                            </li>
                                                        {% else %}

                                                            <li class="no-sell">
                                                                <span class="no-sell-child">{{ option }}</span>
                                                            </li>
                                                        {% endif %}
                                                    {% endif %}


                                                {% endfor %}

                                            {% endfor %}

                                            {% unless product.tags contains 'pre-order' %}
                                                {% if product.metafields.productsize.sizeguide != nil and sizeofsize != 'One Size' %}
                                                    <li>
                                                        {% render 'size-guide-link' %}
                                                    </li>
                                                {% endif %}
                                            {% endunless %}
                                        </ul>
                                    {% endfor %}
                                </div>

                                <div class="buy-button-holder">


                                    {% assign sizeofsizestrip = sizeofsize | strip %}

                                    {% for variant in product.variants %}
                                        {% assign activeNotifyme = true %}
                                        {% if variant.metafields.custom.disablenotifyme == true %}
                                            {% assign activeNotifyme = false %}
                                            {% break %}
                                        {% else %}
                                            {% assign activeNotifyme = true %}
                                        {% endif %}

                                    {% endfor %}

                                    {% assign currentVariant = product.selected_or_first_available_variant %}

                                    <button onclick="dataLayer.push({'product_id': '{{ product.id }}','product_price': '{{ product.price | money_without_currency | strip_html }}','user_email':'{{ customer.email | md5 }}','product_category' : '{{ product.metafields.mm-google-shopping.google_product_category }}','event': 'Add to Cart'});"
                                            type="button" {% if product.available == false and activeNotifyme == false and sizeofsizestrip != "One Size" %} disabled {% endif %} {% if product.available == false and sizeofsizestrip == "One Size" %} disabled {% endif %}
                                            class="{% if sizeofsizestrip == "One Size" and product.available == false and activeNotifyme != false %} onesize_button_notifyme {% endif %}product-buy-button-active"
                                            {% if sizeofsizestrip == "One Size" and product.available == true %}
                                                data-id="{{ product.variants[0].id }}"
                                            {% elsif control != true %}
                                                data-id=""
                                            {% else %}
                                                data-id=""
                                            {% endif %}
                                            data-variant="{{ product.variants[0].option1 }}"
                                            type="button">

                                        {% if product.tags contains 'pre-order' %}
                                            <span class="add-to-cart___text">Pre Order</span>
                                        {% elsif product.available == false and activeNotifyme == false %}
                                            <span class="add-to-cart___text">Sold Out</span>
                                        {% elsif currentVariant.inventory_quantity < 0 %}
                                            <span class="add-to-cart___text">Sold Out</span>
                                        {% elsif product.available == false and sizeofsizestrip == "One Size" %}
                                            <span class="add-to-cart___text">Sold Out</span>
                                        {% elsif product.available == false and activeNotifyme != false %}
                                            <span class="add-to-cart___text">Add to Cart</span>
                                        {% else %}
                                            <span class="add-to-cart___text">Add to Cart</span>
                                        {% endif %}
                                        <div class="loading-overlay__spinner buybutton-animation">
                                            <svg aria-hidden="true" focusable="false" role="presentation"
                                                 class="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                                                <circle class="pathbuy" fill="none" stroke-width="6" stroke="white"
                                                        cx="33" cy="33" r="30"></circle>
                                            </svg>
                                        </div>
                                    </button>
                                </div>
                            </div>

                        {%- when 'information' -%}

                            {% assign informationcontrol = block.settings.specialfeatures %}

                            {% if informationcontrol != "" %}

                                <div class="product-options__wrapper">
                                    {% assign information = block.settings.specialfeatures | split: "," %}
                                    {% if product.metafields.productsize.sizeguide != nil and sizeofsize != 'One Size' %}
                                        <div class="size-guide">
                                            {% render 'size-guide-link' %}
                                        </div>
                                    {% endif %}
                                    <div class="option-select__wrapper">
                                        {% for informations in information %}
                                            <div class="osp osp-left">
                                                <img src="https://cdn.shopify.com/s/files/1/0548/6644/4336/files/product-dots.svg?v=1642786923"/>
                                                <p> {{ informations | escape }} </p>
                                            </div>
                                        {% endfor %}
                                    </div>
                                    {%- comment -%}
                                    {% if product.tags contains 'pre-order' %}
                                       <div class="pre-order-mobile-holder" id="pre-order-mobile-holder">
                                         {{ product.metafields.preorder.preordercontent }}
                                       </div>
                                 {% endif %}
                                 {%- endcomment -%}


                                </div>

                            {% endif %}



                            {% assign collapsecontrol = "" %}



                        {%- when 'collapse' -%}


                            <div class="product___descriptions_holder">
                                <ul>

                                    {%- for block in section.blocks -%}
                                        {%- case block.type -%}
                                            {%- when 'collapsible_tab' -%}
                                                {% assign title = block.settings.heading %}
                                                {% assign content = block.settings.content %}

                                                {% comment %}V2 content is not set, render hardcoded legacy values{% endcomment %}
                                                {% comment %}{% if block.settings.content == "" or block.settings.content == null %}{% endcomment %}
                                                    {% comment %}{% case block.settings.collapse_order %}{% endcomment %}
                                                        {% comment %}{%- when 'first' -%}{% endcomment %}
                                                            {% comment %}{% assign content = product.metafields.my_fields.material_care.value %}{% endcomment %}
                                                        {% comment %}{%- when 'second' -%}{% endcomment %}
                                                            {% comment %}{% assign content = product.metafields.my_fields.free_shipping_returns.value %}{% endcomment %}
                                                        {% comment %}{%- when 'third' -%}{% endcomment %}
                                                            {% comment %}{% assign content = product.metafields.my_fields.sustainability.value %}{% endcomment %}
                                                    {% comment %}{% endcase %}{% endcomment %}
                                                {% comment %}{% endif %}{% endcomment %}

                                                {% unless content == "" or block.settings.content == null %}
                                                    {% render 'collapsible-tab', content: content, title: title %}
                                                {% endunless %}
                                        {%- endcase -%}
                                    {%- endfor -%}
                                </ul>
                            </div>

                        {%- when 'setsaveme' -%}

                            {% if block.settings.setsaveproduct != nil %}


                                <div class="saveset-container-main">
                                    {% assign getProduct = block.settings.setsaveproduct %}
                                    {% assign sizeofsizesetsave = getProduct.variants[0].option2 %}

                                    {% if sizeofsizesetsave == nil %}
                                        {% assign sizeofsizesetsave = 'One Size' %}
                                    {% endif %}


                                    {% for product_option in getProduct.options_with_values %}

                                        {% if product_option.name contains 'Size' %}
                                            {% assign autoSizeAdd = false %}
                                        {% else %}
                                            {% assign autoSizeAdd = true %}
                                        {% endif %}
                                    {% endfor %}


                                    <div class="setsave-container">

                                        <div class="setsave satsave-left">

                                            {% assign fvariantSize = getProduct.options_with_values[0].name %}

                                            {% assign setsaveImage = getProduct.media[0].preview_image %}


                                            <a href="{{ getProduct.url }}"><img id="imagepath"
                                                                                src="{{ setsaveImage | img_url: '312x390' }}"/></a>
                                        </div>

                                        <div class="setsave satsave-right">
                                            <div class="setsave-title">
                                                <a href="{{ getProduct.url }}">
                                                    <h2>{{ block.settings.setsavetitle }}</h2></a>
                                                <h3>{%- render 'product-title', name: getProduct.title -%} </h3>
                                                <h4>{{ getProduct.type }}</h4>
                                            </div>
                                            <div class="setsave-price">
                                                {% for variant in getProduct.variants %}
                                                    {% if forloop.first == true %}
                                                        <span class="money show-setsave"
                                                              data-vrid="{{ variant.id }}">{{ variant.price | money_without_trailing_zeros | strip_html }}</span>
                                                    {% else %}
                                                        <span style="display:none;" class="money show-setsave"
                                                              data-vrid="{{ variant.id }}">{{ variant.price | money_without_trailing_zeros | strip_html }}</span>
                                                    {% endif %}
                                                {% endfor %}
                                                {% for variant in getProduct.variants %}
                                                    {% if forloop.first == true %}
                                                        <span data-vrid="{{ variant.id }}"
                                                              class="money sale-setsave">{% if variant.compare_at_price != nil %}{{ variant.compare_at_price | money_without_trailing_zeros | strip_html }}{% endif %}</span>
                                                    {% else %}
                                                        <span style="display:none;" class="money sale-setsave"
                                                              data-vrid="{{ variant.id }}">{% if variant.compare_at_price != nil %}{{ variant.compare_at_price | money_without_trailing_zeros | strip_html }}{% endif %}</span>
                                                    {% endif %}
                                                {% endfor %}
                                            </div>
                                        </div>


                                    </div>


                                    {% assign variantCorrection = getProduct.variants[0].option1 | handleize %}
                                    {% assign variantColorType = getProduct.variants[0].metafields.colortype.seasonal.value %}



                                    {% if variantCorrection != 'default-title' %}
                                        <div class="setsave__main_color">


                                            {% if getProduct.metafields.variantproduct.productgroup.value != nil %}

                                                <div class="setsave-variant-colors color-selector-product setsave-holder">
                                                    <div class="color-holder color-holder-ss">

                                                        <div class="f-small">Core Colors:</div>
                                                        <span id="selectedColorsetsave"
                                                              class="selected-color">{% if variantColorType != true %}{{ getProduct.variants[0].option1 }}{% endif %}</span>
                                                    </div>
                                                    <div class="setsave___colors">

                                                        {% assign recommended_products = getProduct.metafields.variantproduct.productgroup.value %}
                                                        {% assign currentProductColorthis = getProduct.variants[0].option1 | handleize %}

                                                        {% for product in recommended_products %}
                                                            {% assign currentProductColorthem = product.variants[0].option1 | handleize %}
                                                            {% assign recommended_products_image = recommended_products.media[0].preview_image %}

                                                            {% if product.variants[0].metafields.colortype.seasonal != true %}
                                                                <label class="color-changer-wrap"
                                                                       for="{{ product.variants[0].id }}-{{ option | handleize }}-{{ forloop.index0 }}">

                                                                    {% render 'variant-color',
                                                                            colorsource: settings.colorswatch,
                                                                            forsource: product.variants[0].option1,
                                                                            control1: currentProductColorthis,
                                                                            control2: currentProductColorthem,
                                                                            circletriger: 'empty-circle-satsave'
                                                                    %}


                                                                    <input class="color-changer-setsave {% if getProduct.available == false %} sold_out {% endif %}  {% if sizeofsizesetsave == 'One Size' %}onlycolorsetsave{% endif %}"
                                                                           type="radio"
                                                                           data-rprice="{{ product.variants[0].price | money_without_trailing_zeros | strip_html }}"
                                                                           data-cprice="{% if product.variants[0].compare_at_price != nil %}{{ product.variants[0].compare_at_price | money_without_trailing_zeros | strip_html }}{% else %}nodiscount{% endif %}"
                                                                           data-fistID="{{ product.variants[0].id }}"
                                                                           id="{{ product.variants[0].id }}-{{ product.variants[0].option1 }}-{{ }}"
                                                                           name="color"
                                                                           value="{{ product.variants[0].option1 | handleize }}"
                                                                           data-colorShow="{{ product.variants[0].option1 }}"
                                                                           data-image="{{ product.images[0] | product_img_url: '312x390' }}"
                                                                           form="product-form-{{ variant.id }}"
                                                                           {% if product.variants[0].option1 == getProduct.variants[0].option1 %}checked{% endif %}
                                                                    >

                                                                </label>
                                                            {% else %}

                                                            {% endif %}
                                                        {% endfor %}

                                                    </div>
                                                </div>

                                            {% endif %}




                                            {% if getProduct.metafields.variantproduct.productgroupseasonal.value != nil %}
                                                <div class="setsave-variant-colors color-selector-product setsave-holder">
                                                    <div class="color-holder color-holder-ss">


                                                        <div class="f-small">Seasonal Colors:</div>


                                                        <span id="selectedColorsetsaveSeasonal"
                                                              class="selected-color">{% if variantColorType == true %}{{ getProduct.variants[0].option1 }}{% endif %}</span>
                                                    </div>
                                                    <div class="setsave___colors">
                                                        {% assign recommended_products = getProduct.metafields.variantproduct.productgroupseasonal.value %}
                                                        {% for product in recommended_products %}
                                                            {% assign currentProductColorthem = product.variants[0].option1 | handleize %}
                                                            {% assign recommended_products_image = recommended_products.media[0].preview_image %}

                                                            {% if product.variants[0].metafields.colortype.seasonal == true %}

                                                                <label class="color-changer-wrap"
                                                                       for="{{ product.variants[0].id }}-{{ option | handleize }}-{{ forloop.index0 }}"
                                                                       data-available="{{ product.available }}">

                                                                    {% render 'variant-color',
                                                                            colorsource: settings.colorswatch,
                                                                            forsource: product.variants[0].option1,
                                                                            control1: currentProductColorthis,
                                                                            control2: currentProductColorthem,
                                                                            circletriger: 'empty-circle-satsave'
                                                                    %}

                                                                    <input class="color-changer-setsave seasonal {% if getProduct.available == false %} sold_out {% endif %}  {% if sizeofsizesetsave == 'One Size' %}onlycolorsetsave{% endif %}"
                                                                           type="radio"
                                                                           data-rprice="{{ product.variants[0].price | money_without_trailing_zeros | strip_html }}"
                                                                           data-cprice="{% if product.variants[0].compare_at_price != nil %}{{ product.variants[0].compare_at_price | money_without_trailing_zeros | strip_html }}{% else %}nodiscount{% endif %}"
                                                                           data-fistID="{{ product.variants[0].id }}"
                                                                           id="{{ product.variants[0].id }}-{{ product.variants[0].option1 }}-{{ }}"
                                                                           name="color"
                                                                           value="{{ product.variants[0].option1 | handleize }}"
                                                                           data-colorShow="{{ product.variants[0].option1 }}"
                                                                           data-image="{{ product.images[0] | product_img_url: '312x390' }}"
                                                                           form="product-form-{{ variant.id }}"
                                                                           {% if product.variants[0].option1 == getProduct.variants[0].option1 %}checked{% endif %}
                                                                    >

                                                                </label>

                                                            {% else %}

                                                            {% endif %}
                                                        {% endfor %}

                                                    </div>
                                                </div>

                                            {% endif %}

                                        </div>
                                    {% endif %}

                                    {% assign typebuttondetect = false %}
                                    {% for tag in getProduct.tags %}
                                        {% if tag contains 'typebutton' %}
                                            {% assign typebuttondetect = true %}
                                            {% break %}
                                        {% endif %}
                                    {% endfor %}


                                    <div id="warning-setsave" class="warning-select-size">
                                        <p>*Please Choose Size</p>
                                    </div>

                                    {% render 'notifyme' %}

                                    <div class="size___wrapper-setsave">
                                        {% if autoSizeAdd == true %}
                                            <div class="one__size">ONE SIZE</div>
                                        {% else %}
                                            <div class="choose___button__setsave {% if typebuttondetect == true %}type__button{% endif %} {% if sizeofsizesetsave == 'One Size' %}one-size-choose-setsave{% endif %}">
                                                CHOOSE {% if typebuttondetect == true %}TYPE{% else %}SIZE{% endif %}</div>
                                        {% endif %}

                                        <div class="sizes-setsave {% if sizeofsizesetsave == 'One Size' %}one-size-sizes-setsave{% endif %}">


                                            {% assign recommended_products = getProduct.metafields.variantproduct.productgroupseasonal.value %}
                                            {% assign recommended_products_core = getProduct.metafields.variantproduct.productgroup.value %}

                                            {% assign current_productd = getProduct.variants[0].option1 | handleize %}
                                            {% for product in recommended_products %}

                                                {% assign loopColor = product.variants[0].option1 | handleize %}

                                                <ul class="size-holder-setsave {{ product.variants[0].option1 | handleize }}  {% if sizeofsizesetsave == 'One Size' or autoSizeAdd == true %}one-size-holder-setsave{% endif %} {% if loopColor == current_productd %} active {% endif %}">

                                                    <div class="three-angle-size-setsave {% if sizeofsizesetsave == 'One Size' %}one-size-threeangle-setsave{% endif %}">
                                                        <img src="https://cdn.shopify.com/s/files/1/0548/6644/4336/files/arrow-size-selection.svg?v=1647027468"/>
                                                    </div>
                                                    <div class="close-x-setsave {% if sizeofsizesetsave == 'One Size' %}one-size-close-x-setsave{% endif %}">
                                                        <img src="https://cdn.shopify.com/s/files/1/0548/6644/4336/files/size-selection-close.svg?v=1647088856"/>
                                                    </div>

                                                    {% for variant in product.variants %}
                                                        {% for option in variant.option2 %}
                                                            {% if variant.inventory_quantity != 0 %}

                                                                <li>
                                                                    <a data-variant-id="{{ variant.id }}"
                                                                       data-i="{{ variant.option1 | handleize }}"
                                                                       data-varprice="{{ variant.price | money_without_trailing_zeros | strip_html }}"
                                                                       data-vardiscount="{{ variant.compare_at_price | money_without_trailing_zeros | strip_html }}"
                                                                       class="size-selection-setsave {%- comment -%}{% if getProduct.variants[0].option2 == variant.option2 %} active {% endif %}{%- endcomment -%}"
                                                                       href="javascript:void(0)">{{ option }}</a>
                                                                </li>
                                                            {% else %}
                                                                {% if variant.inventory_policy == 'continue' %}
                                                                    <li class="no-stock">
                                                                        <a data-variant-id="{{ variant.id }}"
                                                                           data-i="{{ variant.option1 | handleize }}"
                                                                           data-varprice="{{ variant.price | money_without_trailing_zeros | strip_html }}"
                                                                           data-vardiscount="{{ variant.compare_at_price | money_without_trailing_zeros | strip_html }}"
                                                                           class="size-selection-setsave {%- comment -%}{% if getProduct.variants[0].option2 == variant.option2 %} active {% endif %}{%- endcomment -%}"
                                                                           href="javascript:void(0)">{{ option }}</a>
                                                                    </li>
                                                                {% else %}
                                                                    <li class="no-sell"> {{ option }}</li>
                                                                {% endif %}

                                                            {% endif %}
                                                        {% endfor %}
                                                    {% endfor %}
                                                </ul>
                                            {% endfor %}
                                            {% for product in recommended_products_core %}
                                                {% assign loopColor = product.variants[0].option1 | handleize %}
                                                <ul class="size-holder-setsave {{ product.variants[0].option1 | handleize }}  {% if sizeofsizesetsave == 'One Size' or autoSizeAdd == true %}one-size-holder-setsave{% endif %} {% if loopColor == current_productd %} active {% endif %}">

                                                    <div class="three-angle-size-setsave {% if sizeofsizesetsave == 'One Size' %}one-size-threeangle-setsave{% endif %}">
                                                        <img src="https://cdn.shopify.com/s/files/1/0548/6644/4336/files/arrow-size-selection.svg?v=1647027468"/>
                                                    </div>
                                                    <div class="close-x-setsave {% if sizeofsizesetsave == 'One Size' %}one-size-close-x-setsave{% endif %}">
                                                        <img src="https://cdn.shopify.com/s/files/1/0548/6644/4336/files/size-selection-close.svg?v=1647088856"/>
                                                    </div>

                                                    {% for variant in product.variants %}
                                                        {% for option in variant.option2 %}

                                                            {% if variant.inventory_quantity != 0 %}

                                                                <li>
                                                                    <a data-variant-id="{{ variant.id }}"
                                                                       data-i="{{ variant.option1 | handleize }}"
                                                                       data-varprice="{{ variant.price | money_without_trailing_zeros | strip_html }}"
                                                                       data-vardiscount="{{ variant.compare_at_price | money_without_trailing_zeros | strip_html }}"
                                                                       class="size-selection-setsave {%- comment -%}{% if getProduct.variants[0].option2 == variant.option2 %} active {% endif %}{%- endcomment -%}"
                                                                       href="javascript:void(0)">{{ option }}</a>
                                                                </li>
                                                            {% else %}
                                                                {% if variant.inventory_policy == 'continue' %}
                                                                    <li class="no-stock">
                                                                        <a data-variant-id="{{ variant.id }}"
                                                                           data-i="{{ variant.option1 | handleize }}"
                                                                           data-varprice="{{ variant.price | money_without_trailing_zeros | strip_html }}"
                                                                           data-vardiscount="{{ variant.compare_at_price | money_without_trailing_zeros | strip_html }}"
                                                                           class="size-selection-setsave {%- comment -%}{% if getProduct.variants[0].option2 == variant.option2 %} active {% endif %}{%- endcomment -%}"
                                                                           href="javascript:void(0)">{{ option }}</a>
                                                                    </li>
                                                                {% else %}
                                                                    <li class="no-sell"> {{ option }}</li>
                                                                {% endif %}

                                                            {% endif %}
                                                        {% endfor %}
                                                    {% endfor %}
                                                </ul>
                                            {% endfor %}

                                        </div>
                                        <div class="buy-button-holder">

                                            <button type="button" {% if getProduct.available == false %} disabled {% endif %}
                                                    class="product-buy-button-active-setsave"
                                                    data-id="{% if sizeofsizesetsave == 'One Size' or autoSizeAdd == true %}{{ getProduct.variants[0].id }}{% endif %}"
                                                    type="button">
                                                {% if getProduct.tags contains 'pre-order' %}
                                                    <span class="add-to-cart___text">Pre Order</span>
                                                {% elsif getProduct.available == false %}
                                                    <span class="add-to-cart___text">Sold Out</span>
                                                {% else %}
                                                    <span class="add-to-cart___text setsave-add-to-cart">Complete the look</span>
                                                {% endif %}
                                                <div class="loading-overlay__spinner buybutton-animation">
                                                    <svg aria-hidden="true" focusable="false" role="presentation"
                                                         class="spinner" viewBox="0 0 66 66"
                                                         xmlns="http://www.w3.org/2000/svg">
                                                        <circle class="pathbuy" fill="none" stroke-width="6"
                                                                stroke="white" cx="33" cy="33" r="30"></circle>
                                                    </svg>
                                                </div>
                                            </button>
                                        </div>
                                    </div>


                                </div>

                            {% endif %}







                    {%- endcase -%}


                {%- endfor -%}


            </div>
        </div>
    </div>


    <div id="sizeguide" class="sizeguide" style="display:none;">
        <div class="close-meger">
            <button data-fancybox-close>
                <img src="https://cdn.shopify.com/s/files/1/0548/6644/4336/files/announcement_close_mini.svg?v=1639137194"/>
            </button>

        </div>
        <div class="size-main-container">
            <div class="sg sizeguideknitter">
                <h2>Size Guide</h2>
                <div class="size-knitter-container">
                    <div class="thumbnail-size">
                        <img src="{{ section.settings.knitter_comment_img | img_url: '190x190' }}"/>
                    </div>
                    <h3>{{ section.settings.knitter_name }}</h3>
                    <p>{{ section.settings.knitter_comment }}</p>
                </div>
            </div>
            <div class="sg sizeguidetable">
                <h2>Size Guide</h2>
                <div class="size-switcher">
                    <span>in</span>
                    <div class="switcher">
                        <img id="switcher-dot"
                             src="https://cdn.shopify.com/s/files/1/0548/6644/4336/files/switcher-dot.svg?v=1642854039"
                             alt="The Knotty Ones Switcher"/>
                    </div>
                    <span>cm</span>
                </div>
                {{ product.metafields.productsize.sizeguide }}
            </div>
        </div>


    </div>


    <div id="expLightbox" class="modal exp-lightbox ei1-bg js-modal js-exp-lightbox" data-animation="on"
         data-modal-first-focus=".js-exp-lightbox__body">
        <div class="exp-lightbox__content ei1-pointer-events-none">
            <header class="exp-lightbox__header">
                <h2 class="exp-lightbox__title ei1-pointer-events-auto">
                    {%- render 'product-title', name: product.title -%} - {{ product.type | escape }}
                </h2>

                <menu class="menu-bar menu-bar--expanded@md ei1-pointer-events-auto js-menu-bar"
                      data-menu-class="menu--overlay">
                    <li class="menu-bar__item menu-bar__item--trigger js-menu-bar__trigger" role="menuitem"
                        aria-label="More options">
                        <svg class="ei1-icon menu-bar__icon" aria-hidden="true" viewBox="0 0 16 16">
                            <circle cx="8" cy="7.5" r="1.5"/>
                            <circle cx="1.5" cy="7.5" r="1.5"/>
                            <circle cx="14.5" cy="7.5" r="1.5"/>
                        </svg>
                    </li>
                    <li class="menu-bar__item js-modal__close" role="menuitem">
                        <svg class="ei1-icon menu-bar__icon" aria-hidden="true" viewBox="0 0 24 24">
                            <g stroke-linecap="square" stroke-linejoin="miter" stroke-miterlimit="10" stroke-width="2"
                               stroke="currentColor" fill="none">
                                <line x1="19" y1="5" x2="5" y2="19"></line>
                                <line x1="19" y1="19" x2="5" y2="5"></line>
                            </g>
                        </svg>
                        <span class="menu-bar__label reset">Close</span>
                    </li>
                </menu>
            </header>

            <div class="exp-lightbox__body slideshow slideshow--transition-slide js-exp-lightbox__body" data-swipe="on"
                 data-navigation="off" data-zoom="on">
                <ul class="slideshow__content js-exp-lightbox__slideshow">
                    <!-- gallery created in JS -->
                </ul>

                <ul>
                    <li class="slideshow__control js-slideshow__control">
                        <button class="slideshow__btn ei1-pointer-events-auto js-tab-focus">
                            <svg class="ei1-icon" viewBox="0 0 32 32"><title>Show previous slide</title>
                                <path d="M20.768,31.395L10.186,16.581c-0.248-0.348-0.248-0.814,0-1.162L20.768,0.605l1.627,1.162L12.229,16 l10.166,14.232L20.768,31.395z"></path>
                            </svg>
                        </button>
                    </li>

                    <li class="slideshow__control js-slideshow__control">
                        <button class="slideshow__btn ei1-pointer-events-auto js-tab-focus">
                            <svg class="ei1-icon" viewBox="0 0 32 32"><title>Show next slide</title>
                                <path d="M11.232,31.395l-1.627-1.162L19.771,16L9.605,1.768l1.627-1.162l10.582,14.813 c0.248,0.348,0.248,0.814,0,1.162L11.232,31.395z"></path>
                            </svg>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</section>

<script>
    // let url = new URL(window.location.href);
    // let params = url.searchParams;
    //
    // if (params.has('variant')) {
    //     params.delete('variant');
    //     url.search = params.toString();
    //     window.location.replace(url.toString());
    // }
</script>

<script type="application/ld+json">
    {
      "@context": "http://schema.org/",
      "@type": "Product",
      "name": {{ product.title | json }},
    "url": {{ shop.url | append: product.url | json }},
    {%- if product.selected_or_first_available_variant.featured_media -%}
        {%- assign media_size = product.selected_or_first_available_variant.featured_media.preview_image.width | append: 'x' -%}
      "image": [
        {{ product.selected_or_first_available_variant.featured_media | img_url: media_size | prepend: "https:" | json }}
      ],
    {%- endif -%}
    "description": {{ product.description | strip_html | json }},
    {%- if product.selected_or_first_available_variant.sku != blank -%}
      "sku": {{ product.selected_or_first_available_variant.sku | json }},
    {%- endif -%}
    "brand": {
      "@type": "Thing",
      "name": {{ product.vendor | json }}
    },
    "offers": [
    {%- for variant in product.variants -%}
        {
          "@type" : "Offer",
          {%- if variant.sku != blank -%}
            "sku": {{ variant.sku | json }},
          {%- endif -%}
          "availability" : "http://schema.org/{% if variant.available %}InStock{% else %}OutOfStock{% endif %}",
          "price" : {{ variant.price | divided_by: 100.00 | json }},
          "priceCurrency" : {{ cart.currency.iso_code | json }},
          "url" : {{ shop.url | append: variant.url | json }}
        }{% unless forloop.last %}{% endunless %}
    {%- endfor -%}
    ]
  }
</script>

{% schema %}
{
  "name": "Master Product",
  "tag": "section",
  "class": "product-section product-main-holder",
  "blocks": [
    {
      "type": "information",
      "name": "Product Information",
      "limit": 3,
      "settings": [
        {
          "type": "text",
          "id": "specialfeatures",
          "label": "Special Information",
          "info": "Special Information"
        }
      ]
    },
    {
      "type": "title",
      "name": "t:sections.main-product.blocks.title.name",
      "limit": 1
    },
    {
      "type": "price",
      "name": "t:sections.main-product.blocks.price.name",
      "limit": 1
    },
    {
      "type": "collapse",
      "name": "Collapse Menu",
      "limit": 1
    },
    {
      "type": "variant_picker",
      "name": "Color Selector",
      "limit": 1
    },
    {
      "type": "size",
      "name": "Size Selector",
      "limit": 1
    },
    {
      "type": "description",
      "name": "Product Description",
      "limit": 1
    },
    {
      "type": "setsaveme",
      "name": "Set & Save",
      "limit": 1,
      "settings": [
        {
          "type": "product",
          "id": "setsaveproduct",
          "info": "Select Set & Save Product",
          "label": "More information"
        },
        {
          "type": "text",
          "id": "setsavetitle",
          "info": "Title of Section",
          "label": "Enter titile"
        }
      ]
    },
    {
      "type": "collapsible_tab",
      "name": "t:sections.main-product.blocks.collapsible_tab.name",
      "settings": [
        {
          "type": "select",
          "id": "collapse_order",
          "label": "Collapse Order",
          "options": [
            {
              "value": "first",
              "label": "First"
            },
            {
              "value": "second",
              "label": "Second"
            },
            {
              "value": "third",
              "label": "Third"
            }
          ],
          "default": "first"
        },
        {
          "type": "text",
          "id": "heading",
          "default": "Collapsible tab",
          "info": "t:sections.main-product.blocks.collapsible_tab.settings.heading.info",
          "label": "t:sections.main-product.blocks.collapsible_tab.settings.heading.label"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "t:sections.main-product.blocks.collapsible_tab.settings.content.label"
        },
        {
          "type": "page",
          "id": "page",
          "label": "t:sections.main-product.blocks.collapsible_tab.settings.page.label"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "text",
      "id": "bid_header",
      "label": "Between Image Description Title"
    },
    {
      "type": "richtext",
      "id": "bid_content",
      "label": "Between Image Description Text"
    },
    {
      "type": "header",
      "content": "Knitter Comment"
    },
    {
      "type": "image_picker",
      "id": "knitter_comment_img",
      "label": "Knitter Comment Avatar"
    },
    {
      "type": "text",
      "id": "knitter_name",
      "label": "Knitter Name"
    },
    {
      "type": "richtext",
      "id": "knitter_comment",
      "label": "Knitter Comment"
    }
  ]
}
{% endschema %}


<script>
    $(document).ready(function () {
        $('.mobile-slider-wrapper').css('opacity', '1');
        $('.mobile-slider').flickity('resize');
    });

    var getAllImages = [];
    var newArray = [];
    var ImagePorter;
    var ImagePorterDesktop;

    var dataImages;
    var waist;
    var bust;
    var hips;
    var modelcm;
    var modelin;

    var midAreaHeader;
    var midAreacontent;


    var detectFormatsplit;

    //var midContent;

    $('.color-changer').click(function () {
        waist = [];
        bust = [];
        hips = [];
        modelcm = [];
        modelin = [];
        dataImages = [];
        gender = [];
        midAreaHeader = "";
        midAreaContent = "";
        getAllImages = [];

        midAreaHeader = $(this).attr('data-heading');
        midAreaContent = $(this).attr('data-content');


        //midcontent = $('.pdp-image-module').html();

        waist = $(this).attr('data-waist').slice(0, -1).split(',');
        bust = $(this).attr('data-bust').slice(0, -1).split(',');
        hips = $(this).attr('data-hips').slice(0, -1).split(',');
        modelcm = $(this).attr('data-modelcm').slice(0, -1).split(',');
        modelin = $(this).attr('data-modelin').slice(0, -1).split(',');
        dataImages = $(this).attr('data-modelinfo').slice(0, -1).split(',');
        gender = $(this).attr('data-gender').slice(0, -1).split(',');

        waist.reverse();
        bust.reverse();
        hips.reverse();
        modelcm.reverse();
        modelin.reverse();
        dataImages.reverse();
        gender.reverse();


        $('.pimage-wrapper').find('li').remove();
        $('.pimage-wrapper').find('div').remove();

        getAllImages = $(this).attr('data-images').split(',');


        for (let i = 0; i < getAllImages.length - 1; i++) {


            detectFormatsplit = getAllImages[i].split('?');
            detectFormatType = detectFormatsplit[0].slice(-3);


            if (i == 0) {
                if (detectFormatType == 'mp4') {
                    ImagePorter = '<div class="mps-item carousel-cell"><video width="320" playsinline="" autoplay muted="" loop=""><source src="' + getAllImages[0] + '" type="video/mp4"></video></div>';
                    ImagePorterDesktop = '<li class="pimage"><video width="320" playsinline="" autoplay muted="" loop=""><source src="' + getAllImages[0] + '" type="video/mp4"></video></li>';
                    $('.pimage-wrapper').append(ImagePorterDesktop);
                } else {
                    ImagePorter = '<div class="mps-item carousel-cell js-exp-gallery__item"><img src="' + getAllImages[0] + '"></div>';
                    ImagePorterDesktop = '<li class="pimage js-exp-gallery__item"><img src="' + getAllImages[0] + '"></li>';
                    $('.pimage-wrapper').append(ImagePorterDesktop);
                }
            } else {
                if (i == 4 && getAllImages.length > 4) {
                    if (midAreaHeader != "" || midAreaContent != "") {
                        $('.pimage-wrapper').append('<div class="pdp-image-module"><h2>' + midAreaHeader + '</h2><p>' + midAreaContent + '</p></div>');
                    }
                }
                if (detectFormatType == 'mp4') {
                    ImagePorter = ImagePorter + '<div class="mps-item carousel-cell"><video width="320" autoplay playsinline="" muted="" loop=""><source src="' + getAllImages[i] + '" type="video/mp4"></video></div>';
                    ImagePorterDesktop = '<li class="pimage"><video width="320" playsinline="" autoplay muted="" loop=""><source src="' + getAllImages[i] + '" type="video/mp4"></video></li>';
                    $('.pimage-wrapper').append(ImagePorterDesktop);
                } else {

                    ImagePorter = ImagePorter + '<div class="mps-item carousel-cell js-exp-gallery__item"><img src="' + getAllImages[i] + '"></div>';
                    ImagePorterDesktop = '<li class="pimage js-exp-gallery__item"><img src="' + getAllImages[i] + '"></li>';
                    $('.pimage-wrapper').append(ImagePorterDesktop);
                }
            }

            for (let kk = 0; kk < dataImages.length; kk++) {
                if (i + 1 == dataImages[kk]) {

                    var genderChange;
                    if (gender[kk] == 'true') {
                        genderChange = 'Chest:';
                    } else {
                        genderChange = 'Bust:';
                    }
                    // console.log('gender:' + genderChange);
                    $('.pimage-wrapper').find('.pimage').eq(i).append('<a class="model-info-button" href="javascript:void(0);">MODEL INFO</a><div class="infobox" data-variantoption="Black"><ul class="info-window"><div class="infobox_close"><img src="https://cdn.shopify.com/s/files/1/0548/6644/4336/files/svg-remove-item.svg?v=1639399863"></div><div class="change-mager"><div class="inches active">in</div><span>/</span><div class="cm">cm</div></div><li style="order:2;"><span class="header-info-item">' + genderChange + ' </span><span class="info-value" data-mager="' + bust[kk] + '">' + bust[kk] + '"</span></li><li style="order:3;"><span class="header-info-item">Hips: </span><span class="info-value" data-mager="' + hips[kk] + '">' + hips[kk] + '"</span></li><p class="namecm" style="order:1;">' + modelcm[kk] + '</p><p class="nameinch" style="order:1;">' + modelin[kk] + '</p><li style="order:2;"><span class="header-info-item">Waist: </span><span class="info-value" data-mager="' + waist[kk] + '">' + waist[kk] + '"</span></li></ul></div>');
                }
            }
        }

        $('.pimage-wrapper').addClass('active');


        var $carousel = $('.mobile-slider').flickity({
            initialIndex: 1
        });

        var $cells = $carousel.find('.carousel-cell');
        $carousel.flickity('remove', $cells);


        var $cellElems;


        $cellElems = $(ImagePorter);
        //console.log($cellElems);
        $carousel.flickity('insert', $cellElems);
        $cellElems = "";
        $('.mobile-product-slider').addClass('active');


        $carousel.flickity('destroy');
        $carousel.flickity({
            cellAlign: 'left',
            contain: false,
            ImagesLoaded: true,
            resize: true,
            prevNextButtons: false,
            pageDots: true,
            setGallerySize: true,
            lazyLoad: 2
        });

        for (let i = 0; i < getAllImages.length; i++) {
            for (let kk = 0; kk < dataImages.length; kk++) {
                if (i + 1 == dataImages[kk]) {
                    var genderChange;
                    if (gender[kk] == 'true') {
                        genderChange = 'Chest:';
                    } else {
                        genderChange = 'Bust:';
                    }
                    // console.log('gender:' + genderChange);
                    $('.mps-container').find('.flickity-viewport').find('.flickity-slider').find('.mps-item').eq(i).append('<a class="model-info-button" href="javascript:void(0);">MODEL INFO</a><div class="infobox" data-variantoption="Moss Green"><ul class="info-window"><div class="infobox_close"> <img src="https://cdn.shopify.com/s/files/1/0548/6644/4336/files/svg-remove-item.svg?v=1639399863"></div><div class="change-mager"><div class="inches active">in</div><span>/</span><div class="cm">cm</div></div><li style="order:2;"><span class="header-info-item">' + genderChange + ' </span><span class="info-value" data-mager="' + bust[kk] + '">' + bust[kk] + '</span></li><li style="order:3;"><span class="header-info-item">Hips: </span><span class="info-value" data-mager="' + hips[kk] + '">' + hips[kk] + '</span></li><p class="namecm" style="order:1;">' + modelcm[kk] + '</p><p class="nameinch" style="order:1;">' + modelin[kk] + '</p><li style="order:2;"><span class="header-info-item">Waist: </span><span class="info-value" data-mager="' + waist[kk] + '">' + waist[kk] + '</span></li> </ul></div>');
                }
            }
        }

        getAllImages = [];

        $(".mobile-product-slider").addClass('active');

        function onLoadeddata(event) {
            var cell = $('.mobile-slider').flickity('getParentCell', event.target);
            $('.mobile-slider').flickity('cellSizeChange', cell && cell.element);
            $('.mobile-slider').flickity('resize');
        }

        $('.mobile-slider').find('video').each(function (i, video) {
            var lengthVideo = $('.mobile-slider').find('video');
            if (lengthVideo.length > 0) {
                video.play();
                $(video).on('loadeddata', onLoadeddata);
            }
        });


        $('.mobile-slider').flickity('resize');
    });


</script>
